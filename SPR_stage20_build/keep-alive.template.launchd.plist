<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"
 "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <!-- 
    Universal Keep-Alive launchd Template
    通用的 macOS 后台服务配置模板

    使用步骤：
    1. 复制这个文件到 ~/Library/LaunchAgents/
    2. 修改下面的配置部分
    3. 运行: launchctl load -w ~/Library/LaunchAgents/{你的文件名}.plist
    4. 验证: launchctl list | grep {你的label}
    
    重要字段说明：
    - Label: 服务唯一标识（格式 com.{author}.{service}）
    - ProgramArguments: [Python路径, 脚本路径, 参数...]
    - RunAtLoad: 登录时自动启动
    - KeepAlive: 进程崩了自动重启
    - StandardOutPath: 标准输出日志
    - StandardErrorPath: 标准错误日志
  -->

  <!-- 修改这个Label，保证唯一性 -->
  <key>Label</key>
  <string>com.tiger.myservice-keepalive</string>

  <!-- 修改这部分：Python路径和脚本路径 -->
  <key>ProgramArguments</key>
  <array>
    <!-- Python 3 的完整路径 (运行 which python3 查看) -->
    <string>/Library/Frameworks/Python.framework/Versions/3.13/bin/python3</string>
    <!-- 你的 keep-alive 脚本路径 -->
    <string>/Users/yangming/Desktop/path/to/keep-alive.py</string>
  </array>

  <!-- 开机自启 -->
  <key>RunAtLoad</key>
  <true/>

  <!-- 进程崩了自动重启 -->
  <key>KeepAlive</key>
  <true/>

  <!-- 脚本所在的工作目录 -->
  <key>WorkingDirectory</key>
  <string>/Users/yangming/Desktop/path/to</string>

  <!-- 修改这部分：日志文件路径（可选） -->
  <key>StandardOutPath</key>
  <string>/Users/yangming/.myservice-keepalive.out.log</string>
  
  <key>StandardErrorPath</key>
  <string>/Users/yangming/.myservice-keepalive.err.log</string>

  <!-- 环境变量设置 -->
  <key>EnvironmentVariables</key>
  <dict>
    <key>PATH</key>
    <string>/Library/Frameworks/Python.framework/Versions/3.13/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</string>
  </dict>
</dict>
</plist>
